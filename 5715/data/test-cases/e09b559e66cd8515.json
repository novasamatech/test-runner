{"uid":"e09b559e66cd8515","name":"test_rpc_node_is_synced[Test for Moonriver, url: wss://moonriver.public.curie.radiumblock.co/ws]","fullName":"tests.test_substrate_node_is_synced#test_rpc_node_is_synced","historyId":"87fb6ec4e9d9991dc69b439773a2b1f6","time":{"start":1726650399062,"stop":1726650399062,"duration":0},"status":"broken","statusMessage":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.","statusTrace":"request = <SubRequest 'connection_by_url' for <Function test_rpc_node_is_synced[Test for Moonriver, url: wss://moonriver.public.curie.radiumblock.co/ws]>>\n\n    @pytest.fixture(scope=\"module\", params=collect_nodes_for_chains(get_substrate_chains()), ids=task_ids)\n    def connection_by_url(request):\n        data = request.param\n        connection = execute_with_timeout(\n            timeout=FIXTURE_TIMEOUT,\n            function=create_connection_by_url,\n            args=(data[\"url\"],),\n            error_message=f'Timeout {FIXTURE_TIMEOUT} when creating connection: {data[\"url\"]}'\n        )\n>       execute_with_timeout(\n            timeout=FIXTURE_TIMEOUT,\n            function=get_properties,\n            args=(connection,),\n            error_message=f'Timeout {FIXTURE_TIMEOUT} when getting properties: {data[\"url\"]}'\n        )\n\ntests/conftest.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/conftest.py:29: in execute_with_timeout\n    return func_timeout(timeout=timeout, func=function, args=args)\n.venv/lib/python3.10/site-packages/func_timeout/dafunc.py:108: in func_timeout\n    raise_exception(exception)\n.venv/lib/python3.10/site-packages/func_timeout/py3_raise.py:7: in raise_exception\n    raise exception[0] from None\nscripts/utils/metadata_interaction.py:68: in get_properties\n    substrate.get_constant('system', 'ss58Prefix')\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:2133: in get_constant\n    constant = self.get_metadata_constant(module_name, constant_name, block_hash=block_hash)\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:2107: in get_metadata_constant\n    self.init_runtime(block_hash=block_hash)\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:691: in init_runtime\n    self.metadata = self.get_block_metadata(block_hash=runtime_block_hash, decode=True)\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:518: in get_block_metadata\n    response = self.rpc_request(\"state_getMetadata\", params)\n.venv/lib/python3.10/site-packages/substrateinterface/base.py:323: in rpc_request\n    self.__rpc_message_queue.append(json.loads(self.websocket.recv()))\n.venv/lib/python3.10/site-packages/websocket/_core.py:388: in recv\n    opcode, data = self.recv_data()\n.venv/lib/python3.10/site-packages/websocket/_core.py:416: in recv_data\n    opcode, frame = self.recv_data_frame(control_frame)\n.venv/lib/python3.10/site-packages/websocket/_core.py:437: in recv_data_frame\n    frame = self.recv_frame()\n.venv/lib/python3.10/site-packages/websocket/_core.py:478: in recv_frame\n    return self.frame_buffer.recv_frame()\n.venv/lib/python3.10/site-packages/websocket/_abnf.py:363: in recv_frame\n    self.recv_header()\n.venv/lib/python3.10/site-packages/websocket/_abnf.py:319: in recv_header\n    header = self.recv_strict(2)\n.venv/lib/python3.10/site-packages/websocket/_abnf.py:398: in recv_strict\n    bytes_ = self.recv(min(16384, shortage))\n.venv/lib/python3.10/site-packages/websocket/_core.py:563: in _recv\n    return recv(self.sock, bufsize)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsock = <ssl.SSLSocket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6>\nbufsize = 2\n\n    def recv(sock: socket.socket, bufsize: int) -> bytes:\n        if not sock:\n            raise WebSocketConnectionClosedException(\"socket is already closed.\")\n    \n        def _recv():\n            try:\n                return sock.recv(bufsize)\n            except SSLWantReadError:\n                pass\n            except socket.error as exc:\n                error_code = extract_error_code(exc)\n                if error_code not in [errno.EAGAIN, errno.EWOULDBLOCK]:\n                    raise\n    \n            sel = selectors.DefaultSelector()\n            sel.register(sock, selectors.EVENT_READ)\n    \n            r = sel.select(sock.gettimeout())\n            sel.close()\n    \n            if r:\n                return sock.recv(bufsize)\n    \n        try:\n            if sock.gettimeout() == 0:\n                bytes_ = sock.recv(bufsize)\n            else:\n                bytes_ = _recv()\n        except TimeoutError:\n            raise WebSocketTimeoutException(\"Connection timed out\")\n        except socket.timeout as e:\n            message = extract_err_message(e)\n            raise WebSocketTimeoutException(message)\n        except SSLError as e:\n            message = extract_err_message(e)\n            if isinstance(message, str) and \"timed out\" in message:\n                raise WebSocketTimeoutException(message)\n            else:\n                raise\n    \n        if not bytes_:\n>           raise WebSocketConnectionClosedException(\"Connection to remote host was lost.\")\nE           websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.\n\n.venv/lib/python3.10/site-packages/websocket/_socket.py:129: WebSocketConnectionClosedException","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"connection_by_url","time":{"start":1726650357950,"stop":1726650373551,"duration":15601},"status":"broken","statusMessage":"tests.conftest.FixtureTimeoutError: Timeout 15 when getting properties: wss://moonriver.public.curie.radiumblock.co/ws\n","statusTrace":"  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1128, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 907, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 46, in connection_by_url\n    execute_with_timeout(\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 34, in execute_with_timeout\n    raise FixtureTimeoutError(error_message)\n","steps":[{"name":"Function timed out","time":{"start":1726650373551,"stop":1726650373551,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"558649ab5f48898c","name":"Error","source":"558649ab5f48898c.txt","type":"text/plain","size":82}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"connection_by_url","time":{"start":1726650378650,"stop":1726650394042,"duration":15392},"status":"broken","statusMessage":"tests.conftest.FixtureTimeoutError: Timeout 15 when getting properties: wss://moonriver.public.curie.radiumblock.co/ws\n","statusTrace":"  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1128, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 907, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 46, in connection_by_url\n    execute_with_timeout(\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 34, in execute_with_timeout\n    raise FixtureTimeoutError(error_message)\n","steps":[{"name":"Function timed out","time":{"start":1726650394042,"stop":1726650394042,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"2b235d761632abba","name":"Error","source":"2b235d761632abba.txt","type":"text/plain","size":82}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"connection_by_url","time":{"start":1726650399063,"stop":1726650411971,"duration":12908},"status":"broken","statusMessage":"websocket._exceptions.WebSocketConnectionClosedException: Connection to remote host was lost.\n","statusTrace":"  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1128, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/_pytest/fixtures.py\", line 907, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 46, in connection_by_url\n    execute_with_timeout(\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/tests/conftest.py\", line 29, in execute_with_timeout\n    return func_timeout(timeout=timeout, func=function, args=args)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/func_timeout/dafunc.py\", line 108, in func_timeout\n    raise_exception(exception)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/func_timeout/py3_raise.py\", line 7, in raise_exception\n    raise exception[0] from None\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/scripts/utils/metadata_interaction.py\", line 68, in get_properties\n    substrate.get_constant('system', 'ss58Prefix')\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/substrateinterface/base.py\", line 2133, in get_constant\n    constant = self.get_metadata_constant(module_name, constant_name, block_hash=block_hash)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/substrateinterface/base.py\", line 2107, in get_metadata_constant\n    self.init_runtime(block_hash=block_hash)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/substrateinterface/base.py\", line 691, in init_runtime\n    self.metadata = self.get_block_metadata(block_hash=runtime_block_hash, decode=True)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/substrateinterface/base.py\", line 518, in get_block_metadata\n    response = self.rpc_request(\"state_getMetadata\", params)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/substrateinterface/base.py\", line 323, in rpc_request\n    self.__rpc_message_queue.append(json.loads(self.websocket.recv()))\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_core.py\", line 388, in recv\n    opcode, data = self.recv_data()\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_core.py\", line 416, in recv_data\n    opcode, frame = self.recv_data_frame(control_frame)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_core.py\", line 437, in recv_data_frame\n    frame = self.recv_frame()\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_core.py\", line 478, in recv_frame\n    return self.frame_buffer.recv_frame()\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_abnf.py\", line 363, in recv_frame\n    self.recv_header()\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_abnf.py\", line 319, in recv_header\n    header = self.recv_strict(2)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_abnf.py\", line 398, in recv_strict\n    bytes_ = self.recv(min(16384, shortage))\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_core.py\", line 563, in _recv\n    return recv(self.sock, bufsize)\n  File \"/home/runner/work/test-runner/test-runner/nova-utils/.venv/lib/python3.10/site-packages/websocket/_socket.py\", line 129, in recv\n    raise WebSocketConnectionClosedException(\"Connection to remote host was lost.\")\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_substrate_node_is_synced"},{"name":"host","value":"fv-az525-428"},{"name":"thread","value":"2123-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_substrate_node_is_synced"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"connection_by_url","value":"{'url': 'wss://moonriver.public.curie.radiumblock.co/ws', 'name': 'Moonriver'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a2a6a3b316ad302c","status":"broken","statusDetails":"tests.conftest.FixtureTimeoutError: Timeout 15 when getting properties: wss://moonriver.public.curie.radiumblock.co/ws","time":{"start":1726650378650,"stop":1726650378650,"duration":0}},{"uid":"e561e438ca0668ef","status":"broken","statusDetails":"tests.conftest.FixtureTimeoutError: Timeout 15 when getting properties: wss://moonriver.public.curie.radiumblock.co/ws","time":{"start":1726650357949,"stop":1726650357949,"duration":0}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":24,"unknown":0,"total":28},"items":[{"uid":"757948b2e6f678d8","reportUrl":"https://novasamatech.github.io/test-runner/5714//#testresult/757948b2e6f678d8","status":"passed","time":{"start":1726585505780,"stop":1726585505825,"duration":45}},{"uid":"e86a2018ec7ba0f9","reportUrl":"https://novasamatech.github.io/test-runner/5713//#testresult/e86a2018ec7ba0f9","status":"passed","time":{"start":1726563891577,"stop":1726563891835,"duration":258}},{"uid":"4a89170796e5c842","reportUrl":"https://novasamatech.github.io/test-runner/5712//#testresult/4a89170796e5c842","status":"passed","time":{"start":1726499102791,"stop":1726499102817,"duration":26}},{"uid":"c5d4394bd279dcc","reportUrl":"https://novasamatech.github.io/test-runner/5711//#testresult/c5d4394bd279dcc","status":"passed","time":{"start":1726477509742,"stop":1726477509753,"duration":11}},{"uid":"5647529fdc8390ee","reportUrl":"https://novasamatech.github.io/test-runner/5710//#testresult/5647529fdc8390ee","status":"passed","time":{"start":1726412679597,"stop":1726412679886,"duration":289}},{"uid":"c60f274f338d3838","reportUrl":"https://novasamatech.github.io/test-runner/5709//#testresult/c60f274f338d3838","status":"broken","statusDetails":"tests.conftest.FixtureTimeoutError: Timeout 15 when creating connection: wss://moonriver.public.curie.radiumblock.co/ws","time":{"start":1726391119418,"stop":1726391119418,"duration":0}},{"uid":"61e08904fdca4d9b","reportUrl":"https://novasamatech.github.io/test-runner/5708//#testresult/61e08904fdca4d9b","status":"passed","time":{"start":1726326284922,"stop":1726326285152,"duration":230}},{"uid":"e4444934d678237a","reportUrl":"https://novasamatech.github.io/test-runner/5707//#testresult/e4444934d678237a","status":"passed","time":{"start":1726304681737,"stop":1726304681751,"duration":14}},{"uid":"25db2ca8048076e3","reportUrl":"https://novasamatech.github.io/test-runner/5706//#testresult/25db2ca8048076e3","status":"passed","time":{"start":1726239904183,"stop":1726239904429,"duration":246}},{"uid":"b2208332bb1e3aa8","reportUrl":"https://novasamatech.github.io/test-runner/5705//#testresult/b2208332bb1e3aa8","status":"passed","time":{"start":1726218285104,"stop":1726218285387,"duration":283}},{"uid":"76cecd76d6e96dd","reportUrl":"https://novasamatech.github.io/test-runner/5704//#testresult/76cecd76d6e96dd","status":"passed","time":{"start":1726153494470,"stop":1726153494523,"duration":53}},{"uid":"97676a36d3d2b87","reportUrl":"https://novasamatech.github.io/test-runner/5703//#testresult/97676a36d3d2b87","status":"passed","time":{"start":1726131889026,"stop":1726131889302,"duration":276}},{"uid":"b9fac4131342a3d8","reportUrl":"https://novasamatech.github.io/test-runner/5702//#testresult/b9fac4131342a3d8","status":"passed","time":{"start":1726117723239,"stop":1726117723287,"duration":48}},{"uid":"9a9e2d7d37be2635","reportUrl":"https://novasamatech.github.io/test-runner/5695//#testresult/9a9e2d7d37be2635","status":"passed","time":{"start":1725807938527,"stop":1725807938578,"duration":51}},{"uid":"9daafc4f2791b97","reportUrl":"https://novasamatech.github.io/test-runner/5694//#testresult/9daafc4f2791b97","status":"passed","time":{"start":1725786280177,"stop":1725786280192,"duration":15}},{"uid":"ad17e8b038a0c64b","reportUrl":"https://novasamatech.github.io/test-runner/5693//#testresult/ad17e8b038a0c64b","status":"passed","time":{"start":1725721489544,"stop":1725721489816,"duration":272}},{"uid":"58d424980e959c7c","reportUrl":"https://novasamatech.github.io/test-runner/5692//#testresult/58d424980e959c7c","status":"passed","time":{"start":1725699909535,"stop":1725699909722,"duration":187}},{"uid":"3ca1c043d00104e7","reportUrl":"https://novasamatech.github.io/test-runner/5691//#testresult/3ca1c043d00104e7","status":"passed","time":{"start":1725635090269,"stop":1725635090304,"duration":35}},{"uid":"c08cb6ece3ebb918","reportUrl":"https://novasamatech.github.io/test-runner/5690//#testresult/c08cb6ece3ebb918","status":"passed","time":{"start":1725613510655,"stop":1725613510665,"duration":10}},{"uid":"a6748ec83d07dcce","reportUrl":"https://novasamatech.github.io/test-runner/5689//#testresult/a6748ec83d07dcce","status":"passed","time":{"start":1725548679055,"stop":1725548679095,"duration":40}}]},"tags":[]},"source":"e09b559e66cd8515.json","parameterValues":["{'url': 'wss://moonriver.public.curie.radiumblock.co/ws', 'name': 'Moonriver'}"]}